
{
    "AWSTemplateFormatVersion" : "2010-09-09",
    "Description" : "This stack has VPC, 3 Subnets in different availability zones, route table, an internet gateway and an EC2 instance",
    "Parameters" : {
  	   "InstanceTypeParameter" : {
    	    "Type" : "String",
    	    "Default" : "t2.micro",
    	    "AllowedValues" : ["t2.micro", "m1.small", "m1.large"],
    	    "Description" : "Enter t2.micro, m1.small, or m1.large. Default is t2.micro."
  	                             }
    },
    "Resources" : {
	     "VPC" :{
   	     "Type" : "AWS::EC2::VPC",
   	     "Properties" : {
        		"CidrBlock" : "10.0.2.0/24",
        		"EnableDnsSupport" : false,
        		"EnableDnsHostnames" : false,
        		"InstanceTenancy" : "default",
        		"Tags" : [{ "Key":"Name","Value":"CLOUD_STACK-csye6225-vpc" }]
     		}
    	},

    	"InternetGateway":{
       	"Type" : "AWS::EC2::InternetGateway",
       	"Properties" : {
          		"Tags" : [{"Key":"Name","Value":"CLOUD_STACK-csye6225-InternetGateway"}]
       		}
      },
      "AttachGateway" : {
       	"Type" : "AWS::EC2::VPCGatewayAttachment",
       	"Properties" : {
          		"VpcId" : { "Ref" : "VPC" },
          		"InternetGatewayId" : { "Ref" : "InternetGateway" }
       		}
    	},
    	"RouteTable" : {
             "Type" : "AWS::EC2::RouteTable",
             "Properties" : {
                "VpcId" : { "Ref" : "VPC" },
                "Tags" : [ { "Key":"Name","Value":"CLOUD_STACK-csye6225-public-route-table"} ]
      }
    },
    "Route" : {
           "Type" : "AWS::EC2::Route",
           "DependsOn" : "GatewayToInternet",
           "Properties" : {
              "RouteTableId" : { "Ref" : "RouteTable" },
              "DestinationCidrBlock" : "0.0.0.0/0",
              "GatewayId" : { "Ref" : "InternetGateway" }
           }
    }
  }
}
